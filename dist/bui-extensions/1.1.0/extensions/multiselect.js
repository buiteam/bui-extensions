define("bui-extensions/1.1.0/extensions/multiselect",["bui-common/1.1.0/common","jquery","bui-form/1.1.0/index","bui-overlay/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index","bui-picker/1.1.0/index"],function(e,t,i){var n=(e("bui-common/1.1.0/common"),e("bui-extensions/1.1.0/extensions/search"),e("bui-extensions/1.1.0/extensions/multiselect/multilist"),e("bui-extensions/1.1.0/extensions/multiselect/multilistpicker"),e("bui-extensions/1.1.0/extensions/multiselect/multiselect"));i.exports=n}),define("bui-extensions/1.1.0/extensions/search",["jquery","bui-common/1.1.0/common","bui-form/1.1.0/index","bui-overlay/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index"],function(e,t,i){function n(e){n.superclass.constructor.call(this,e)}var s=e("jquery"),o=e("bui-common/1.1.0/common"),r=e("bui-form/1.1.0/index");o.extend(n,o.Base),n.ATTRS={tpl:{value:'<p><input type="text" name="key"/> <button class="button button-small">确定</button></p>'}},o.augment(n,{createDom:function(){var e=this,t=s("<div></div>").append(e.get("tpl")),i=new r.Group({srcNode:t}).render();e.set("el",t),e.set("group",i)},renderUI:function(e){var t=e.get("el");t.before(this.get("el"))},bindUI:function(e){var t=this,i=t.get("el"),n=e.get("store"),s=t.get("group");i.find(".button").on("click",function(){n.load(s.getRecord())})}}),i.exports=n}),define("bui-extensions/1.1.0/extensions/multiselect/multilist",["jquery","bui-common/1.1.0/common","bui-list/1.1.0/index","bui-data/1.1.0/index"],function(e,t,i){function n(e,t,i){o.isFunction(e.set)?e.set(t,i):e[t]=i}var s=e("jquery"),o=e("bui-common/1.1.0/common"),r=o.Component,l=(e("bui-list/1.1.0/index"),o.prefix),u=l+"multilist-source",c=l+"multilist-target",a=l+"multilist-btn-right",m=l+"multilist-btn-left",d=r.Controller.extend({renderUI:function(){var e=this,t=e.get("source"),i=e.get("target");t=e._initControl(t,u),i=e._initControl(i,c),t.render(),i.render(),e.set("source",t),e.set("target",i)},_initControl:function(e,t){var i=this,n=i.get("el");return e.isController?(e.set("render",n.find("."+t)),e):(e.render=n.find("."+t),i._createControl(e))},_createControl:function(e){if(e.isController)return e;var t=e.multipleSelect||this.get("multipleSelect"),i=e.xclass||t?"listbox":"simple-list";return e.xclass=i,r.create(e,this)},bindUI:function(){var e=this,t=e.get("el"),i=e.get("source"),n=e.get("target"),o=t.find("."+a),r=t.find("."+m);o.on("click",function(){var t=i.getSelection();e.fire("selected",{items:t})!==!1&&(i.removeItems(t),n.addItems(t))}),r.on("click",function(){var t=n.getSelection();e.fire("unselected",{items:t})!==!1&&(n.removeItems(t),i.addItems(t))}),i.on("dblclick",function(t){var o=s(t.domTarget).closest("li"),r=i.getItemByElement(o);e.fire("selected",{items:[r]})!==!1&&(i.removeItem(r),n.addItem(r))}),n.on("dblclick",function(t){var o=s(t.domTarget).closest("li"),r=n.getItemByElement(o);e.fire("unselected",{items:[r]})!==!1&&(n.removeItem(r),i.addItem(r))})},_uiSetStore:function(e){var t=this,i=t.get("target"),n=i.get("idField");e.filter(function(e){var t=i.getItems(),s=!0;return o.each(t,function(t){return t[n]===e[n]?(s=!1,!1):void 0}),s})}},{ATTRS:{source:{value:{elCls:"bui-select-list"},shared:!1},target:{value:{elCls:"bui-select-list"},shared:!1},store:{setter:function(e){return n(this.get("source"),"store",e),e}},items:{setter:function(e){var t=new o.Data.Store({data:e});return this.set("store",t),e}},url:{setter:function(e){if(e){var t=new o.Data.Store({url:e,autoLoad:!0});return this.set("store",t),e}}},tpl:{value:'<div class="row"><div class="span5 '+u+'"></div><div class="span2 bui-multilist-action centered"><p><button  class="button button-small '+a+'" type="button">&gt;&gt;</button></p><p><button  class="button button-small '+m+'" type="button">&lt;&lt;</button></p></div><div class="span5 '+c+'"></div></div>'}}},{xclass:"multilist"});i.exports=d}),define("bui-extensions/1.1.0/extensions/multiselect/multilistpicker",["jquery","bui-overlay/1.1.0/index","bui-common/1.1.0/common","bui-picker/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index"],function(e,t,i){var n=e("jquery"),s=e("bui-overlay/1.1.0/index").Dialog,o=e("bui-picker/1.1.0/index").Mixin,r=s.extend([o],{setSelectedValue:function(e){function t(){i._syncValue(e),s.off("load",t)}var i=this,n=i.get("innerControl"),s=n.get("store");!this.get("isInit")&&e&&(e=e.split(","),s.get("url")?s.on("load",t):i._syncValue(e))},_syncValue:function(e){var t=this,i=t.get("innerControl"),s=t._getTextField(),o=i.get("source").get("idField"),r=i.get("store"),l=r.getResult(),u=[],c=[];BUI.each(l,function(t){-1!==n.inArray(t[o],e)&&(u.push(t),c.push(t.text))}),n(s).val(c.join(",")),BUI.each(u,function(e){r.remove(e)}),i.get("target").setItems(u)},getSelectedValue:function(){var e=this,t=e.get("innerControl"),i=t.get("target");return e._getItemsValue(i)},getSelectedText:function(){var e=this,t=e.get("innerControl"),i=t.get("target");return e._getItemsText(i)},_getItemsText:function(e,t){return t||(t=e.get("items")),n.map(t,function(t){return e.getItemText(t)})},_getItemsValue:function(e,t){var i=e.get("idField");return t||(t=e.get("items")),n.map(t,function(t){return e.getValueByField(t,i)})}},{ATTRS:{success:{value:function(){var e=this;e.get("innerControl").fire(e.get("changeEvent")),this.close()}}}},{xclass:"multilist-picker"});i.exports=r}),define("bui-extensions/1.1.0/extensions/multiselect/multiselect",["jquery","bui-common/1.1.0/common","bui-list/1.1.0/index","bui-data/1.1.0/index","bui-overlay/1.1.0/index","bui-picker/1.1.0/index","bui-form/1.1.0/index"],function(e,t,i){var n=e("jquery"),s=e("bui-common/1.1.0/common"),o=s.Component,r=e("bui-extensions/1.1.0/extensions/multiselect/multilist"),l=e("bui-extensions/1.1.0/extensions/multiselect/multilistpicker"),u=e("bui-extensions/1.1.0/extensions/search"),c=s.prefix+"select-input",a=o.Controller.extend({initializer:function(){var e,t=this,i=t.get("search"),n=t.get("searchTpl"),s={};i&&(n&&(s.tpl=n),i=new u(s),e=[i]);var o=new r({items:t.get("items"),url:t.get("url"),plugins:e});t.set("multilist",o)},renderUI:function(){var e=this,t=e.get("el"),i=t.find("."+c),n=e.get("multilist"),s=new l({trigger:i,autoRender:!0,textField:i,valueField:e.get("valueField"),children:[n]});e.set("picker",s),e.set("textField",i)},bindUI:function(){var e=this,t=e.get("multilist");t.on("selected",function(t){var i=t.items;return e.fire("selected",{items:i})}),t.on("unselected",function(t){var i=t.items;return e.fire("unselected",{items:i})})}},{ATTRS:{elCls:{value:"bui-select"},searchTpl:{},search:{},url:{},items:{},source:{getter:function(){return this.get("multilist").get("source")}},target:{getter:function(){return this.get("multilist").get("target")}},valueField:{setter:function(e){return n(e)}},textField:{},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+c+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'}}},{xclass:"multiselect"});i.exports=a});