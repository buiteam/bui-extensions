define("bui-extensions/1.1.0/index",["bui-common/1.1.0/common","jquery","bui-tree/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index","bui-grid/1.1.0/index","bui-mask/1.1.0/index","bui-toolbar/1.1.0/index","bui-menu/1.1.0/index","bui-picker/1.1.0/index","bui-overlay/1.1.0/index","bui-form/1.1.0/index"],function(e){e("bui-extensions/1.1.0/src/treegrid"),e("bui-extensions/1.1.0/src/treepicker"),e("bui-extensions/1.1.0/src/search"),e("bui-extensions/1.1.0/src/multiselect")}),define("bui-extensions/1.1.0/src/treegrid",["bui-common/1.1.0/common","jquery","bui-tree/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index","bui-grid/1.1.0/index","bui-mask/1.1.0/index","bui-toolbar/1.1.0/index","bui-menu/1.1.0/index"],function(e,t,i){var n=(e("bui-common/1.1.0/common"),e("bui-tree/1.1.0/index")),r=e("bui-grid/1.1.0/index"),s=r.Grid.extend([n.Mixin],{},{ATTRS:{iconContainer:{value:".bui-grid-cell-inner"}}},{xclass:"tree-grid"});i.exports=s}),define("bui-extensions/1.1.0/src/treepicker",["bui-common/1.1.0/common","jquery","bui-picker/1.1.0/index","bui-overlay/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index","bui-tree/1.1.0/index"],function(e,t,i){var n=e("bui-common/1.1.0/common"),r=e("bui-picker/1.1.0/index").ListPicker,s=(e("bui-tree/1.1.0/index"),r.extend({setSelectedValue:function(e){e=e||"";var t=this,i=t.get("tree");if(t.get("isInit")||t._initControl(),"selected"===t.get("selectStatus"))e&&i.expandNode(e),r.prototype.setSelectedValue.call(t,e);else{i.clearAllChecked();var s=e.split(",");n.each(s,function(e){i.setChecked(e)})}},getSelectedValue:function(){var e=this,t=e.get("tree");if("selected"===e.get("selectStatus"))return r.prototype.getSelectedValue.call(e);var i=t.getCheckedNodes();return i=e._getFilterNodes(i),n.Array.map(i,function(e){return e.id}).join(",")},getSelectedText:function(){var e=this,t=e.get("tree");if("selected"===e.get("selectStatus"))return r.prototype.getSelectedText.call(e);var i=t.getCheckedNodes();return i=e._getFilterNodes(i),n.Array.map(i,function(e){return e.text}).join(",")},_getFilterNodes:function(e){var t=this,i=t.get("filter");return i&&(e=n.Array.filter(e,i)),e}},{ATTRS:{defaultChildClass:{value:"tree-list"},selectStatus:{value:"selected"},changeEvent:{getter:function(){return this.get("selectStatus")+"change"}},hideEvent:{getter:function(e){return"checked"===this.get("selectStatus")?null:e}},filter:{},tree:{getter:function(){return this.get("children")[0]}}}},{xclass:"tree-picker"}));i.exports=s}),define("bui-extensions/1.1.0/src/search",["jquery","bui-common/1.1.0/common","bui-form/1.1.0/index","bui-overlay/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index"],function(e,t,i){function n(e){n.superclass.constructor.call(this,e)}var r=e("jquery"),s=e("bui-common/1.1.0/common"),u=e("bui-form/1.1.0/index");s.extend(n,s.Base),n.ATTRS={tpl:{value:'<p><input type="text" name="key"/> <button class="button button-small">确定</button></p>'}},s.augment(n,{createDom:function(){var e=this,t=r("<div></div>").append(e.get("tpl")),i=new u.Group({srcNode:t}).render();e.set("el",t),e.set("group",i)},renderUI:function(e){var t=e.get("el");t.before(this.get("el"))},bindUI:function(e){var t=this,i=t.get("el"),n=e.get("store"),r=t.get("group");i.find(".button").on("click",function(){n.load(r.getRecord())})}}),i.exports=n}),define("bui-extensions/1.1.0/src/multiselect",["bui-common/1.1.0/common","jquery","bui-form/1.1.0/index","bui-overlay/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index","bui-picker/1.1.0/index"],function(e,t,i){var n=(e("bui-common/1.1.0/common"),e("bui-extensions/1.1.0/src/search"),e("bui-extensions/1.1.0/src/multiselect/multilist"),e("bui-extensions/1.1.0/src/multiselect/multilistpicker"),e("bui-extensions/1.1.0/src/multiselect/multiselect"));i.exports=n}),define("bui-extensions/1.1.0/src/multiselect/multilist",["jquery","bui-common/1.1.0/common","bui-list/1.1.0/index","bui-data/1.1.0/index"],function(e,t,i){function n(e,t,i){s.isFunction(e.set)?e.set(t,i):e[t]=i}var r=e("jquery"),s=e("bui-common/1.1.0/common"),u=s.Component,o=(e("bui-list/1.1.0/index"),s.prefix),l=o+"multilist-source",c=o+"multilist-target",a=o+"multilist-btn-right",d=o+"multilist-btn-left",m=u.Controller.extend({renderUI:function(){var e=this,t=e.get("source"),i=e.get("target");t=e._initControl(t,l),i=e._initControl(i,c),t.render(),i.render(),e.set("source",t),e.set("target",i)},_initControl:function(e,t){var i=this,n=i.get("el");return e.isController?(e.set("render",n.find("."+t)),e):(e.render=n.find("."+t),i._createControl(e))},_createControl:function(e){if(e.isController)return e;var t=e.multipleSelect||this.get("multipleSelect"),i=e.xclass||t?"listbox":"simple-list";return e.xclass=i,u.create(e,this)},bindUI:function(){var e=this,t=e.get("el"),i=e.get("source"),n=e.get("target"),s=t.find("."+a),u=t.find("."+d);s.on("click",function(){var t=i.getSelection();e.fire("selected",{items:t})!==!1&&(i.removeItems(t),n.addItems(t))}),u.on("click",function(){var t=n.getSelection();e.fire("unselected",{items:t})!==!1&&(n.removeItems(t),i.addItems(t))}),i.on("dblclick",function(t){var s=r(t.domTarget).closest("li"),u=i.getItemByElement(s);e.fire("selected",{items:[u]})!==!1&&(i.removeItem(u),n.addItem(u))}),n.on("dblclick",function(t){var s=r(t.domTarget).closest("li"),u=n.getItemByElement(s);e.fire("unselected",{items:[u]})!==!1&&(n.removeItem(u),i.addItem(u))})},_uiSetStore:function(e){var t=this,i=t.get("target"),n=i.get("idField");e.filter(function(e){var t=i.getItems(),r=!0;return s.each(t,function(t){return t[n]===e[n]?(r=!1,!1):void 0}),r})}},{ATTRS:{source:{value:{elCls:"bui-select-list"},shared:!1},target:{value:{elCls:"bui-select-list"},shared:!1},store:{setter:function(e){return n(this.get("source"),"store",e),e}},items:{setter:function(e){var t=new s.Data.Store({data:e});return this.set("store",t),e}},url:{setter:function(e){if(e){var t=new s.Data.Store({url:e,autoLoad:!0});return this.set("store",t),e}}},tpl:{value:'<div class="row"><div class="span5 '+l+'"></div><div class="span2 bui-multilist-action centered"><p><button  class="button button-small '+a+'" type="button">&gt;&gt;</button></p><p><button  class="button button-small '+d+'" type="button">&lt;&lt;</button></p></div><div class="span5 '+c+'"></div></div>'}}},{xclass:"multilist"});i.exports=m}),define("bui-extensions/1.1.0/src/multiselect/multilistpicker",["jquery","bui-overlay/1.1.0/index","bui-common/1.1.0/common","bui-picker/1.1.0/index","bui-list/1.1.0/index","bui-data/1.1.0/index"],function(e,t,i){var n=e("jquery"),r=e("bui-overlay/1.1.0/index").Dialog,s=e("bui-picker/1.1.0/index").Mixin,u=r.extend([s],{setSelectedValue:function(e){function t(){i._syncValue(e),r.off("load",t)}var i=this,n=i.get("innerControl"),r=n.get("store");!this.get("isInit")&&e&&(e=e.split(","),r.get("url")?r.on("load",t):i._syncValue(e))},_syncValue:function(e){var t=this,i=t.get("innerControl"),r=t._getTextField(),s=i.get("source").get("idField"),u=i.get("store"),o=u.getResult(),l=[],c=[];BUI.each(o,function(t){-1!==n.inArray(t[s],e)&&(l.push(t),c.push(t.text))}),n(r).val(c.join(",")),BUI.each(l,function(e){u.remove(e)}),i.get("target").setItems(l)},getSelectedValue:function(){var e=this,t=e.get("innerControl"),i=t.get("target");return e._getItemsValue(i)},getSelectedText:function(){var e=this,t=e.get("innerControl"),i=t.get("target");return e._getItemsText(i)},_getItemsText:function(e,t){return t||(t=e.get("items")),n.map(t,function(t){return e.getItemText(t)})},_getItemsValue:function(e,t){var i=e.get("idField");return t||(t=e.get("items")),n.map(t,function(t){return e.getValueByField(t,i)})}},{ATTRS:{success:{value:function(){var e=this;e.get("innerControl").fire(e.get("changeEvent")),this.close()}}}},{xclass:"multilist-picker"});i.exports=u}),define("bui-extensions/1.1.0/src/multiselect/multiselect",["jquery","bui-common/1.1.0/common","bui-list/1.1.0/index","bui-data/1.1.0/index","bui-overlay/1.1.0/index","bui-picker/1.1.0/index","bui-form/1.1.0/index"],function(e,t,i){var n=e("jquery"),r=e("bui-common/1.1.0/common"),s=r.Component,u=e("bui-extensions/1.1.0/src/multiselect/multilist"),o=e("bui-extensions/1.1.0/src/multiselect/multilistpicker"),l=e("bui-extensions/1.1.0/src/search"),c=r.prefix+"select-input",a=s.Controller.extend({initializer:function(){var e,t=this,i=t.get("search"),n=t.get("searchTpl"),r={};i&&(n&&(r.tpl=n),i=new l(r),e=[i]);var s=new u({items:t.get("items"),url:t.get("url"),plugins:e});t.set("multilist",s)},renderUI:function(){var e=this,t=e.get("el"),i=t.find("."+c),n=e.get("multilist"),r=new o({trigger:i,autoRender:!0,textField:i,valueField:e.get("valueField"),children:[n]});e.set("picker",r),e.set("textField",i)},bindUI:function(){var e=this,t=e.get("multilist");t.on("selected",function(t){var i=t.items;return e.fire("selected",{items:i})}),t.on("unselected",function(t){var i=t.items;return e.fire("unselected",{items:i})})}},{ATTRS:{elCls:{value:"bui-select"},searchTpl:{},search:{},url:{},items:{},source:{getter:function(){return this.get("multilist").get("source")}},target:{getter:function(){return this.get("multilist").get("target")}},valueField:{setter:function(e){return n(e)}},textField:{},tpl:{view:!0,value:'<input type="text" readonly="readonly" class="'+c+'"/><span class="x-icon x-icon-normal"><i class="icon icon-caret icon-caret-down"></i></span>'}}},{xclass:"multiselect"});i.exports=a});